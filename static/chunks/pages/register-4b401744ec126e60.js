(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{4746:function(e,r,s){"use strict";s.r(r);var t=s(9499),n=s(29),a=s(7794),i=s.n(a),o=s(7294),c=s(1664),l=s.n(c),u=s(3299),d=s(7536),m=s(6501),p=s(1163),h=s(9703),f=s(5547),g=s(810),w=s(5893);function j(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),s.push.apply(s,t)}return s}function x(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?j(Object(s),!0).forEach(function(r){(0,t.Z)(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}var v=function(){var e=(0,u.useSession)().data,r=(0,p.useRouter)(),s=r.query.redirect,t=(0,f.F)(),a=t.inCheckoutProcess,c=t.setInCheckoutProcess;(0,o.useEffect)(function(){null!=e&&e.user&&(a?(c(!1),r.push(s||"/checkout")):r.push(s||"/"))},[r,e,s]);var j,v=(0,d.cI)(),P=v.handleSubmit,b=v.register,y=v.getValues,N=v.formState.errors,O=(j=(0,n.Z)(i().mark(function e(r){var s,t,n,a,o,c,l;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.name,a={name:s,email:t=r.email,password:n=r.password},e.prev=2,e.next=5,(0,g.qC)("/api/auth/signup",a);case 5:return o=e.sent,e.next=8,o.json();case 8:if(c=e.sent,!o.error){e.next=14;break}return m.ZP.error(o.error),e.abrupt("return");case 14:m.ZP.success(c.msg);case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(2),m.ZP.error((0,h.Z)(e.t0)),e.abrupt("return");case 21:return e.prev=21,e.next=24,(0,u.signIn)("credentials",{redirect:!1,email:t,password:n});case 24:(l=e.sent).error&&m.ZP.error(l.error),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(21),m.ZP.error((0,h.Z)(e.t1));case 31:case"end":return e.stop()}},e,null,[[2,17],[21,28]])})),function(e){return j.apply(this,arguments)});return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("form",{action:"",className:"login-form-container",onSubmit:P(O),children:[(0,w.jsx)("h1",{className:"register-form-top-text",children:"Register"}),(0,w.jsxs)("div",{className:"register-input-item",children:[(0,w.jsx)("label",{htmlFor:"name",children:"Name"}),(0,w.jsx)("input",x(x({type:"name"},b("name",{required:"Please enter name"})),{},{className:"register-input",id:"name",autoFocus:!0})),N.name&&(0,w.jsx)("div",{style:{color:"#dd6666"},children:N.name.message})]}),(0,w.jsxs)("div",{className:"register-input-item",children:[(0,w.jsx)("label",{htmlFor:"email",children:"Email"}),(0,w.jsx)("input",x(x({type:"email"},b("email",{required:"Please enter email",pattern:{value:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$/i,message:"Please enter valid email"}})),{},{className:"register-input",id:"email",autoFocus:!0})),N.email&&(0,w.jsx)("div",{style:{color:"#dd6666"},children:N.email.message})]}),(0,w.jsxs)("div",{className:"register-input-item",children:[(0,w.jsx)("label",{htmlFor:"password",children:"Password"}),(0,w.jsx)("input",x(x({type:"password",className:"register-input"},b("password",{required:"Please enter password",minLength:{value:6,message:"Password requires 6 characters minimum"}})),{},{id:"password",autoFocus:!0})),N.password&&(0,w.jsx)("div",{style:{color:"#dd6666"},children:N.password.message})]}),(0,w.jsxs)("div",{className:"register-input-item",children:[(0,w.jsx)("label",{htmlFor:"password",children:"Confirm Password"}),(0,w.jsx)("input",x(x({type:"password",className:"register-input"},b("confirmPassword",{required:"Please enter confirm password",validate:function(e){return e===y("password")},minLength:{value:6,message:"Password requires 6 characters minimum"}})),{},{id:"password",autoFocus:!0})),N.confirmPassword&&(0,w.jsx)("div",{style:{color:"#dd6666"},children:N.confirmPassword.message}),N.confirmPassword&&"validate"===N.confirmPassword.type&&(0,w.jsx)("div",{style:{color:"#dd6666"},children:"Passwords do not match"})]}),(0,w.jsx)("div",{className:"login-button",children:(0,w.jsx)("button",{className:"login-btn",children:"Register"})}),(0,w.jsxs)("div",{className:"login-botton-text",children:["Already have an account? \xa0",(0,w.jsx)(l(),{href:"/login",className:"link",children:(0,w.jsx)("a",{className:"link",children:"Login"})})]})]})})};r.default=v},5511:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return s(4746)}])}},function(e){e.O(0,[536,774,888,179],function(){return e(e.s=5511)}),_N_E=e.O()}]);