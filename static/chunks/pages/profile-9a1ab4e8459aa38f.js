(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{5886:function(e,t,r){"use strict";r.r(t);var s=r(9499),n=r(29),a=r(7794),c=r.n(a),i=r(1664),l=r.n(i),o=r(7294),u=r(810),d=r(7536),h=r(6501),m=r(5939),p=r(5893);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,s.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=function(){var e,t=(0,o.useState)(!0),r=t[0],s=t[1],a=(0,o.useState)([]),i=a[0],f=a[1],x=(0,d.cI)(),b=x.handleSubmit,N=x.register,v=x.formState.errors,y=(e=(0,n.Z)(c().mark(function e(t){var r,s,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,e.prev=1,e.next=4,(0,u.fP)("/api/auth/update",{name:r});case 4:return s=e.sent,e.next=7,s.json();case 7:n=e.sent,console.log(n),h.Am.success("Name updated successfully!"),(0,h.Am)("SignIn again to see the changes"),n.error&&h.Am.error(n.error),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),h.Am.error(e.t0);case 17:case"end":return e.stop()}},e,null,[[1,14]])})),function(t){return e.apply(this,arguments)});return(0,o.useEffect)(function(){var e;(e=(0,n.Z)(c().mark(function e(){var t,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.Yu)("/api/orders/history");case 3:return t=e.sent,e.next=6,t.json();case 6:(r=e.sent).error?console.log(r.error):s(!1),f(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(){return e.apply(this,arguments)})()},[]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"profile-container",children:[(0,p.jsxs)("form",{onSubmit:b(y),children:[(0,p.jsx)("h2",{className:"profile-title",children:"Update Profile"}),(0,p.jsxs)("div",{className:"update-input",children:[(0,p.jsx)("label",{htmlFor:"name",children:"Name"}),(0,p.jsx)("input",j(j({type:"name"},N("name",{required:"Please enter name"})),{},{className:"register-input",id:"name",autoFocus:!0})),v.name&&(0,p.jsx)("div",{style:{color:"#dd6666"},children:v.name.message})]}),(0,p.jsx)("div",{className:"update-button",children:(0,p.jsx)("button",{className:"update-btn ",children:"Update Name"})})]}),(0,p.jsx)("h2",{className:"profile-title",children:"Order History"}),r?(0,p.jsx)(m.aN,{}):i.length<1?(0,p.jsx)("div",{className:"order-history-empty order-history",children:"You don't have orders yet"}):(0,p.jsx)("div",{className:"table-container order-history",children:(0,p.jsxs)("table",{className:"table",children:[(0,p.jsx)("thead",{className:"table-head",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"column-title",children:"ID"}),(0,p.jsx)("th",{className:"column-title",children:"DATE"}),(0,p.jsx)("th",{className:"column-title",children:"TOTAL"}),(0,p.jsx)("th",{className:"column-title",children:"PAID"}),(0,p.jsx)("th",{className:"column-title",children:"ACTION"})]})}),(0,p.jsx)("tbody",{children:null==i?void 0:i.map(function(e){return(0,p.jsxs)("tr",{className:"table-row",children:[(0,p.jsx)("td",{className:"table-item",children:e._id.substring(20,24)}),(0,p.jsx)("td",{className:"table-item",children:e.createdAt.substring(0,10)}),(0,p.jsxs)("td",{className:"table-item",children:["$",e.totalPrice]}),(0,p.jsx)("td",{className:"table-item",children:e.isPaid?"".concat(e.paidAt.substring(0,10)):"not paid"}),(0,p.jsx)("td",{className:"table-item details",children:(0,p.jsx)(l(),{href:"/order/".concat(e._id),passHref:!0,children:(0,p.jsx)("a",{children:"Details"})})})]},e._id)})})]})})]})})};x.auth=!0,t.default=x},9344:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return r(5886)}])}},function(e){e.O(0,[536,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);